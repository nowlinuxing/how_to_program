レビュー
=============

# レビュー観点

## 設計

* 心地よいインターフェースか
  + 引数の順序、拡張性
* DB
  + 桁あふれの恐れはないか
    - Big int, Unsigned int
  + 過剰でないか
    - TEXT -> VARCHAR
    - DATETIME -> DATE
    - VARCHAR の長さ指定
    - FLOAT -> DECIMAL
  + インデックス
    - カーディナル
    - UNIQUE 制約
    - カバリングインデックス
  + パーティショニング
  + 正規化
    - 迷ったら正規化
    - 非正規化する場合はメリットとデメリットを説明する
* REST
  + 標準的な REST に落とし込めないか
  + カスタム URL でシンプルにできないか
  + 動詞は名詞(リソース名)にできないか
* 規模を見積もる
* ワーストケースに備える
  + うまくいかなかった時の影響範囲
  + 復旧のために何が必要になるか

## コード

* 名前にこだわる
  + 英語としてもっといい表現はないか
* コメント
  + コードに出てこない情報はコメントとして残す
    - なぜそうなっているのか、なぜそう実装しなかったのか
* 異なるものを混ぜない
  + 参照メソッドと更新メソッド
* コードの臭いに敏感になる
  + 読みづらくないか
  + ミスリードになっていないか
  + 解釈の幅が広すぎないか
  + 和製英語

## 改修

* ライブラリのバージョンは適切か
  + 互換性が損なわれていないか
  + 最新バージョンの確認
  
## 外部サービス

* テストの mock/stub 化

## 不具合修正

* コードの対応
  + プロダクトコードとテストコードは対になっているか (プログラマが知るべき97のこと 104「不具合にテストを書いて立ち向かう」)
    1. 最小レベルのテストコードで再現、落ちることを確認
    2. プロダクトコードを修正、通ることを確認
    3. 他のテストコードが通ることを確認
* プロダクトコードを一行コメントアウトするとテストが落ちるか
  + 観点のみ。全てのプロダクトコードについて確認するのは現実的でないので
    - nil を返したり「例外が上がらないこと」だけを確認するテストは対象となるコードを通っていなくても Green になってしまうので特に注意
  + ダブルを乱用していないか
  + 1 つのテスト内で複数の NG ケースを同時に発生させていないか

## その他

* 秘匿情報の隠蔽
  + 秘密鍵、APIキー、token などがコミットに含まれていないか
* 一次ソースで確認する
  + ググってひっかかってきた非公式ページの情報は参考にとどめる
  + がんばって英語を読む
